import{j as e,F as f,a as r,P as x,f as U}from"./index-2d91d905.js";import{r as c}from"./vendor_react-48e4efc0.js";import{a as p}from"./vendor__A-52efc0b7.js";/* empty css               */const F=({username:t,avatar:l,link:n})=>e("a",{className:" bg-cover bg-center h-[15rem] w-[15rem] rounded-lg flex flex-col justify-end",href:n,rel:"noreferrer",style:{backgroundImage:`url(${l})`},target:"_blank",children:e("h1",{className:"text-2xl text-center xs:bg-black p-2 w-full rounded-lg text-white lg:h-full lg:opacity-0 lg:hover:opacity-80 lg:hover:bg-black ",children:t})});function A(t){var N,v;const[l,n]=c.useState({query:"",response_size:30}),[a,d]=c.useState({data:null,remaining_searches:0,time_until_reset:null}),[o,m]=c.useState({loading:!1,error:!1}),u=s=>new Date(s*1e3).toLocaleTimeString(),h=async()=>{const s=await p.get("https://api.github.com/rate_limit"),i=u(s.data.resources.search.reset),b=s.data.resources.search.remaining-1;b>1&&m(g=>({...g,error:!1})),d(g=>({...g,remaining_searches:b,time_until_reset:i}))},$=async()=>{const s=await p.get(`https://api.github.com/search/users?q=${l.query}&per_page=${l.response_size}`);d(i=>({...i,data:s.data.items}))},R=async()=>{try{m(s=>({...s,loading:!0})),await h(),await $(),m(s=>({...s,loading:!1}))}catch{m(i=>({...i,loading:!1,error:!0})),d(i=>({...i,data:null}))}};return e(f,{children:r("div",{className:"play-details",children:[e(x,{play:t}),e("div",{className:"play-details-body",children:r("div",{className:" w-full flex items-center justify-center flex-col gap-4",children:[r("form",{className:"flex flex-col gap-2",onSubmit:s=>s.preventDefault(),children:[r("label",{className:"text-center",htmlFor:"user_name",children:["Who are you searching for ?"," "]}),e("input",{autoFocus:!0,required:!0,className:" rounded-lg p-2 text-center",id:"user_name",inputMode:"text",placeholder:"Enter query here",type:"search",value:l.query,onChange:s=>n(i=>({...i,query:s.target.value}))}),e("label",{htmlFor:"response_size",children:"Maximum number of results you want to see at once:"}),e("input",{className:" rounded-lg p-2 text-center",id:"response_size",inputMode:"numeric",max:"100",min:"1",type:"number",value:l.response_size,onChange:s=>n(i=>({...i,response_size:s.target.value}))}),e("p",{className:"text-xs text-neutral-500 text-center",children:"Default value is 30"}),e("button",{className:"bg-[#00f2fe] p-2 rounded-xl disabled:text-gray-500 disabled:cursor-not-allowed disabled:bg-[#00bbc5]",type:"submit",onClick:()=>{l.query!==""&&R()},children:"Search"})]}),a.remaining_searches>=0&&r("p",{children:["No. of searches remaining : ",a.remaining_searches]}),o.loading&&e("h2",{children:" L O A D I N G . . ."}),e("h2",{className:" text-red-500",children:o.error&&`You have exhausted your search limit. Try again after ${a.time_until_reset}`}),((N=a==null?void 0:a.data)==null?void 0:N.length)===0&&e("h1",{className:"text-3xl text-center",children:"No matching GitHub User Profile"}),!o.error&&e("div",{className:"grid gap-2 grid-cols-[repeat(auto-fit,minmax(15rem,1fr))] w-full place-items-center",children:(v=a==null?void 0:a.data)==null?void 0:v.map(({id:s,login:i,avatar_url:b,html_url:g})=>e(F,{avatar:b,link:g,username:i},s))})]})})]})})}const w=c.createContext(),y="https://api.github.com/users/",D=({children:t})=>{const[l,n]=c.useState(""),[a,d]=c.useState([]),o=u=>{p({method:"get",url:`${y}${u}`}).then(h=>{n(h.data)})},m=u=>{p({method:"get",url:`${y}${u}/repos?sort=created`}).then(h=>{d(h.data)})};return e(w.Provider,{value:{getRepos:m,getUser:o,results:l,repoDetails:a},children:t})},k=()=>c.useContext(w),j=()=>{const{getRepos:t,getUser:l}=k(),[n,a]=c.useState("");return r("form",{className:"nirban-github-profile-form",onSubmit:o=>{o.preventDefault(),l(n),t(n),a("")},children:[e("input",{autoFocus:!0,required:!0,className:"nirban-github-profile-search",placeholder:"Search Username",tabIndex:0,value:n,onChange:o=>a(o.target.value)}),e("button",{className:"nirban-github-profile-btn",type:"submit",children:"Search"})]})},G=()=>{const{results:t,repoDetails:l}=k(),n=a=>e("div",{children:e("h2",{className:"nirban-github-profile-repo-link",children:e("strong",{children:e("a",{href:`${a.html_url}`,rel:"noreferrer",target:"_blank",children:a.name.length>15?a.name.slice(0,15):a.name})})})},a.id);return e("div",{children:t?e("div",{className:"nirban-github-profile-results",children:e("div",{className:"nirban-github-profile-results-body",children:r("div",{children:[r("div",{className:"nirban-github-profile-details",children:[e("img",{alt:`${t.name}`,className:"nirban-github-profile-avatar",src:`${t.avatar_url}`}),e("a",{href:`${t.html_url}`,rel:"noreferrer",target:"_blank",children:e("h2",{className:"nirban-github-profile-link",children:t.name===""?t.login:t.name})})]}),r("div",{className:"nirban-github-profile-results-info",children:[r("div",{children:[t.bio===""?"":r("h2",{className:"nirban-github-profile-bio",children:[e("strong",{children:"Bio:"})," ",t.bio]}),t.location===""?"":r("p",{className:"nirban-github-profile-location",children:[e("strong",{children:"Location:"})," ",t.location]}),t.twitter_username===""?"":r("p",{className:"nirban-github-profile-twitter",children:[e("strong",{children:"Twitter:"})," ",e("a",{href:`https://twitter.com/${t.twitter_username}`,rel:"noreferrer",target:"_blank",children:t.twitter_username})]}),r("ul",{className:"nirban-github-profile-socials",children:[r("li",{children:[e("strong",{children:t.followers})," Followers"]}),r("li",{children:[e("strong",{children:t.following})," Following"]}),r("li",{children:[e("strong",{children:t.public_repos})," Repos"]})]})]}),r("div",{children:[e("h2",{className:"nirban-github-profile-repos-heading",children:"Latest repositories"}),e("div",{className:"nirban-github-profile-repos",children:l==null?void 0:l.map(n).slice(0,5)})]})]})]})})}):e("div",{className:"nirban-github-profile-no-user",children:e("p",{children:"No users to show"})})})};function B(t){return e(f,{children:r("div",{className:"play-details nirban-github-profile",children:[e(x,{play:t}),e("div",{className:"play-details-body",children:e("div",{className:"play-body nirban-github-profile-body",children:r(D,{children:[e("h1",{className:"play-heading nirban-github-profile-heading",children:"Github Profile Search"}),e(j,{}),e("div",{className:"nirban-github-profile-result",children:e(G,{})})]})})})]})})}const S=c.createContext(),_="https://api.github.com/users/",P=({children:t})=>{const[l,n]=c.useState(""),[a,d]=c.useState([]),o=u=>{p({method:"get",url:`${_}${u}`}).then(h=>{n(h.data)})},m=u=>{p({method:"get",url:`${_}${u}/repos?sort=created`}).then(h=>{d(h.data)})};return e(S.Provider,{value:{getRepos:m,getUser:o,results:l,repoDetails:a},children:t})},C=()=>c.useContext(S),q=()=>{const{getUser:t}=C(),[l,n]=c.useState("");return r("div",{className:"flex justify-center input-card",children:[e("input",{id:"username",placeholder:"Enter User Name",title:"user-name",type:"search",value:l,onChange:d=>n(d.target.value)}),r("button",{className:"text-black search-btn",onClick:()=>{t(l),n("")},children:[e("span",{className:"text-black",children:"Find"}),r("div",{id:"clip",children:[e("div",{className:"corner",id:"leftTop"}),e("div",{className:"corner",id:"rightBottom"}),e("div",{className:"corner",id:"rightTop"}),e("div",{className:"corner",id:"leftBottom"})]}),e("span",{className:"arrow",id:"rightArrow"}),e("span",{className:"arrow",id:"leftArrow"})]})]})},T=()=>{const{results:t}=C();return r("div",{className:"profile-card m-auto p-8",children:[t.avatar_url?e("img",{alt:"User Image",className:"avatar flex self-center",src:t.avatar_url}):e("p",{}),e("h1",{className:"text-xl font-bold text-black name flex justify-center",children:t.name}),e("h2",{className:"joined text-lg text-black",children:U(t.created_at)}),e("p",{className:"para text-base",children:t.bio}),r("div",{className:"data flex justify-around m-4 p-4",children:[r("div",{className:"flex flex-col text-black font-bold text-lg",children:[e("p",{children:" Repo:"}),e("p",{className:"self-center",children:t.public_repos})]}),r("div",{className:"flex flex-col text-black font-bold text-lg",children:[e("p",{children:" Followers:"}),e("p",{className:"self-center",children:t.followers})]}),r("div",{className:"flex flex-col text-black font-bold text-lg",children:[e("p",{children:" Following:"}),e("p",{className:"self-center",children:t.following})]})]}),e("button",{className:"btn",children:e("a",{href:t.html_url,target:"_blank",children:"Go!"})})]})};function E(t){return e(f,{children:r("div",{className:"play-details",children:[e(x,{play:t}),e("div",{className:"play-details-body",children:e(P,{children:r("div",{className:"flex justify-center flex-col p-8 m-8 App guf",children:[e(q,{}),e(T,{})]})})})]})})}export{A as G,B as a,E as b};
